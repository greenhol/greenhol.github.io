(()=>{"use strict";const t=new class{constructor(t,e){this.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",this.list=new Set,this.partSize=t,this.parts=e}newId(t){let e=this.createCandidate(t),n=0;for(;this.exists(e);)if(console.warn(`Candidate ${e} already exists. Retry.`),e=this.createCandidate(t),n++,n>10)return console.error("Could not create a unique id, returning empty string",this.list),"";return this.list.add(e),console.log(`returning newId ${e}`),e}createCandidate(t){for(let e=0;e<this.parts;e++)t+=`_${this.createPart()}`;return t}createPart(){return[...Array(this.partSize).keys()].map((()=>this.getRandomChar())).join("")}getRandomChar(){return this.CHARS.charAt(Math.floor(Math.random()*this.CHARS.length))}exists(t){return this.list.has(t)}}(4,2);var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function o(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function s(t){return"function"==typeof t}function a(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Object.create,Object.create;var u=a((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function l(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var c=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var t,e,n,a,l;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var h=r(c),f=h.next();!f.done;f=h.next())f.value.remove(this)}catch(e){t={error:e}}finally{try{f&&!f.done&&(e=h.return)&&e.call(h)}finally{if(t)throw t.error}}else c.remove(this);var d=this.initialTeardown;if(s(d))try{d()}catch(t){l=t instanceof u?t.errors:[t]}var y=this._finalizers;if(y){this._finalizers=null;try{for(var v=r(y),w=v.next();!w.done;w=v.next()){var g=w.value;try{p(g)}catch(t){l=null!=l?l:[],t instanceof u?l=o(o([],i(l)),i(t.errors)):l.push(t)}}}catch(t){n={error:t}}finally{try{w&&!w.done&&(a=v.return)&&a.call(v)}finally{if(n)throw n.error}}}if(l)throw new u(l)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)p(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&l(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&l(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t;var e}(),h=c.EMPTY;function f(t){return t instanceof c||t&&"closed"in t&&s(t.remove)&&s(t.add)&&s(t.unsubscribe)}function p(t){s(t)?t():t.unsubscribe()}var d=null,y=null,v=void 0,w=!1,g=!1,_={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=_.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,o([t,e],i(n))):setTimeout.apply(void 0,o([t,e],i(n)))},clearTimeout:function(t){var e=_.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function m(){}var b=x("C",void 0,void 0);function x(t,e,n){return{kind:t,value:e,error:n}}var k=null;function A(t){if(w){var e=!k;if(e&&(k={errorThrown:!1,error:null}),t(),e){var n=k,r=n.errorThrown,i=n.error;if(k=null,r)throw i}}else t()}var S=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,f(e)&&e.add(n)):n.destination=T,n}return n(e,t),e.create=function(t,e,n){return new $(t,e,n)},e.prototype.next=function(t){this.isStopped?O(function(t){return x("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?O(x("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?O(b,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(c),E=Function.prototype.bind;function M(t,e){return E.call(t,e)}var C=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){N(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){N(t)}else N(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){N(t)}},t}(),$=function(t){function e(e,n,r){var i,o,a=t.call(this)||this;return s(e)||!e?i={next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&g?((o=Object.create(e)).unsubscribe=function(){return a.unsubscribe()},i={next:e.next&&M(e.next,o),error:e.error&&M(e.error,o),complete:e.complete&&M(e.complete,o)}):i=e,a.destination=new C(i),a}return n(e,t),e}(S);function N(t){var e;w?(e=t,w&&k&&(k.errorThrown=!0,k.error=e)):function(t){_.setTimeout((function(){if(!d)throw t;d(t)}))}(t)}function O(t,e){var n=y;n&&_.setTimeout((function(){return n(t,e)}))}var T={closed:!0,next:m,error:function(t){throw t},complete:m},I="function"==typeof Symbol&&Symbol.observable||"@@observable";function P(t){return t}function R(t){return 0===t.length?P:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var L=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r,i=this,o=(r=t)&&r instanceof S||function(t){return t&&s(t.next)&&s(t.error)&&s(t.complete)}(r)&&f(r)?t:new $(t,e,n);return A((function(){var t=i,e=t.operator,n=t.source;o.add(e?e.call(o,n):n?i._subscribe(o):i._trySubscribe(o))})),o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=j(e))((function(e,r){var i=new $({next:function(e){try{t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:e});n.subscribe(i)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[I]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return R(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=j(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function j(t){var e;return null!==(e=null!=t?t:v)&&void 0!==e?e:Promise}var q=a((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),V=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return n(e,t),e.prototype.lift=function(t){var e=new z(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new q},e.prototype.next=function(t){var e=this;A((function(){var n,i;if(e._throwIfClosed(),!e.isStopped){e.currentObservers||(e.currentObservers=Array.from(e.observers));try{for(var o=r(e.currentObservers),s=o.next();!s.done;s=o.next())s.value.next(t)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;A((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;A((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=this,r=n.hasError,i=n.isStopped,o=n.observers;return r||i?h:(this.currentObservers=null,o.push(t),new c((function(){e.currentObservers=null,l(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,r=e.thrownError,i=e.isStopped;n?t.error(r):i&&t.complete()},e.prototype.asObservable=function(){var t=new L;return t.source=this,t},e.create=function(t,e){return new z(t,e)},e}(L),z=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return n(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:h},e}(V),X={now:function(){return(X.delegate||Date).now()},delegate:void 0},H=function(t){function e(e,n,r){void 0===e&&(e=1/0),void 0===n&&(n=1/0),void 0===r&&(r=X);var i=t.call(this)||this;return i._bufferSize=e,i._windowTime=n,i._timestampProvider=r,i._buffer=[],i._infiniteTimeWindow=!0,i._infiniteTimeWindow=n===1/0,i._bufferSize=Math.max(1,e),i._windowTime=Math.max(1,n),i}return n(e,t),e.prototype.next=function(e){var n=this,r=n.isStopped,i=n._buffer,o=n._infiniteTimeWindow,s=n._timestampProvider,a=n._windowTime;r||(i.push(e),!o&&i.push(s.now()+a)),this._trimBuffer(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),n=this._infiniteTimeWindow,r=this._buffer.slice(),i=0;i<r.length&&!t.closed;i+=n?1:2)t.next(r[i]);return this._checkFinalizedStatuses(t),e},e.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,n=t._timestampProvider,r=t._buffer,i=t._infiniteTimeWindow,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){for(var s=n.now(),a=0,u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}},e}(V);class W{constructor(e,n){this._collection$=new H(1),this.collection$=this._collection$,this.id=t.newId(e),this._collection=n,this.emitList()}update(t){t(this._collection),this.emitList()}emitList(){this._collection$.next(this._collection)}}var Y=function(t){function e(e,n){return t.call(this)||this}return n(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(c),D={setInterval:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=D.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,o([t,e],i(n))):setInterval.apply(void 0,o([t,e],i(n)))},clearInterval:function(t){var e=D.delegate;return((null==e?void 0:e.clearInterval)||clearInterval)(t)},delegate:void 0},B=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return n(e,t),e.prototype.schedule=function(t,e){var n;if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,e)),this.pending=!0,this.delay=e,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(i,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),D.setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return e;null!=e&&D.clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n,r=!1;try{this.work(t)}catch(t){r=!0,n=t||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},e.prototype.unsubscribe=function(){if(!this.closed){var e=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,l(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e}(Y),U=function(){function t(e,n){void 0===n&&(n=t.now),this.schedulerActionCtor=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.schedulerActionCtor(this,t).schedule(n,e)},t.now=X.now,t}(),F=function(t){function e(e,n){void 0===n&&(n=U.now);var r=t.call(this,e,n)||this;return r.actions=[],r._active=!1,r}return n(e,t),e.prototype.flush=function(t){var e=this.actions;if(this._active)e.push(t);else{var n;this._active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(U),G=new F(B),K=G;function J(t,e,n){void 0===t&&(t=0),void 0===n&&(n=K);var r,i=-1;return null!=e&&((r=e)&&s(r.schedule)?n=e:i=e),new L((function(e){var r=function(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;r<0&&(r=0);var o=0;return n.schedule((function(){e.closed||(e.next(o++),0<=i?this.schedule(void 0,i):e.complete())}),r)}))}var Q=new L((function(t){return t.complete()}));var Z=function(t){function e(e,n,r,i,o,s){var a=t.call(this,e)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,a._error=i?function(t){try{i(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return n(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(S);function tt(t){return t<=0?function(){return Q}:function(t){return function(e){if(function(t){return s(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}((function(e,n){var r=0;e.subscribe(new Z(n,(function(e){++r<=t&&(n.next(e),t<=r&&n.complete())}),undefined,undefined,undefined))}))}function et(){}function nt(t){return null==t?et:function(){return this.querySelector(t)}}function rt(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function it(){return[]}function ot(t){return null==t?it:function(){return this.querySelectorAll(t)}}function st(t){return function(){return this.matches(t)}}function at(t){return function(e){return e.matches(t)}}var ut=Array.prototype.find;function lt(){return this.firstElementChild}var ct=Array.prototype.filter;function ht(){return Array.from(this.children)}function ft(t){return new Array(t.length)}function pt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function dt(t){return function(){return t}}function yt(t,e,n,r,i,o){for(var s,a=0,u=e.length,l=o.length;a<l;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new pt(t,o[a]);for(;a<u;++a)(s=e[a])&&(i[a]=s)}function vt(t,e,n,r,i,o,s){var a,u,l,c=new Map,h=e.length,f=o.length,p=new Array(h);for(a=0;a<h;++a)(u=e[a])&&(p[a]=l=s.call(u,u.__data__,a,e)+"",c.has(l)?i[a]=u:c.set(l,u));for(a=0;a<f;++a)l=s.call(t,o[a],a,o)+"",(u=c.get(l))?(r[a]=u,u.__data__=o[a],c.delete(l)):n[a]=new pt(t,o[a]);for(a=0;a<h;++a)(u=e[a])&&c.get(p[a])===u&&(i[a]=u)}function wt(t){return t.__data__}function gt(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function _t(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}pt.prototype={constructor:pt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var mt="http://www.w3.org/1999/xhtml";const bt={svg:"http://www.w3.org/2000/svg",xhtml:mt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function xt(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),bt.hasOwnProperty(e)?{space:bt[e],local:t}:t}function kt(t){return function(){this.removeAttribute(t)}}function At(t){return function(){this.removeAttributeNS(t.space,t.local)}}function St(t,e){return function(){this.setAttribute(t,e)}}function Et(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Mt(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function Ct(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function $t(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Nt(t){return function(){this.style.removeProperty(t)}}function Ot(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Tt(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function It(t,e){return t.style.getPropertyValue(e)||$t(t).getComputedStyle(t,null).getPropertyValue(e)}function Pt(t){return function(){delete this[t]}}function Rt(t,e){return function(){this[t]=e}}function Lt(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function jt(t){return t.trim().split(/^|\s+/)}function qt(t){return t.classList||new Vt(t)}function Vt(t){this._node=t,this._names=jt(t.getAttribute("class")||"")}function zt(t,e){for(var n=qt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Xt(t,e){for(var n=qt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Ht(t){return function(){zt(this,t)}}function Wt(t){return function(){Xt(this,t)}}function Yt(t,e){return function(){(e.apply(this,arguments)?zt:Xt)(this,t)}}function Dt(){this.textContent=""}function Bt(t){return function(){this.textContent=t}}function Ut(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ft(){this.innerHTML=""}function Gt(t){return function(){this.innerHTML=t}}function Kt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Jt(){this.nextSibling&&this.parentNode.appendChild(this)}function Qt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===mt&&e.documentElement.namespaceURI===mt?e.createElement(t):e.createElementNS(n,t)}}function te(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function ee(t){var e=xt(t);return(e.local?te:Zt)(e)}function ne(){return null}function re(){var t=this.parentNode;t&&t.removeChild(this)}function ie(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function oe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function se(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function ae(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function ue(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function le(t,e,n){var r=$t(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ce(t,e){return function(){return le(this,t,e)}}function he(t,e){return function(){return le(this,t,e.apply(this,arguments))}}Vt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var fe=[null];function pe(t,e){this._groups=t,this._parents=e}function de(){return new pe([[document.documentElement]],fe)}pe.prototype=de.prototype={constructor:pe,select:function(t){"function"!=typeof t&&(t=nt(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],u=a.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=a[c])&&(s=t.call(o,o.__data__,c,a))&&("__data__"in o&&(s.__data__=o.__data__),l[c]=s);return new pe(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return rt(t.apply(this,arguments))}}(t):ot(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],u=a.length,l=0;l<u;++l)(s=a[l])&&(r.push(t.call(s,s.__data__,l,a)),i.push(s));return new pe(r,i)},selectChild:function(t){return this.select(null==t?lt:function(t){return function(){return ut.call(this.children,t)}}("function"==typeof t?t:at(t)))},selectChildren:function(t){return this.selectAll(null==t?ht:function(t){return function(){return ct.call(this.children,t)}}("function"==typeof t?t:at(t)))},filter:function(t){"function"!=typeof t&&(t=st(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new pe(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,wt);var n=e?vt:yt,r=this._parents,i=this._groups;"function"!=typeof t&&(t=dt(t));for(var o=i.length,s=new Array(o),a=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],h=i[l],f=h.length,p=gt(t.call(c,c&&c.__data__,l,r)),d=p.length,y=a[l]=new Array(d),v=s[l]=new Array(d),w=u[l]=new Array(f);n(c,h,y,v,w,p,e);for(var g,_,m=0,b=0;m<d;++m)if(g=y[m]){for(m>=b&&(b=m+1);!(_=v[b])&&++b<d;);g._next=_||null}}return(s=new pe(s,r))._enter=a,s._exit=u,s},enter:function(){return new pe(this._enter||this._groups.map(ft),this._parents)},exit:function(){return new pe(this._exit||this._groups.map(ft),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),u=0;u<s;++u)for(var l,c=n[u],h=r[u],f=c.length,p=a[u]=new Array(f),d=0;d<f;++d)(l=c[d]||h[d])&&(p[d]=l);for(;u<i;++u)a[u]=n[u];return new pe(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=_t);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],u=a.length,l=i[o]=new Array(u),c=0;c<u;++c)(s=a[c])&&(l[c]=s);l.sort(e)}return new pe(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=xt(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?At:kt:"function"==typeof e?n.local?Ct:Mt:n.local?Et:St)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?Nt:"function"==typeof e?Tt:Ot)(t,e,null==n?"":n)):It(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Pt:"function"==typeof e?Lt:Rt)(t,e)):this.node()[t]},classed:function(t,e){var n=jt(t+"");if(arguments.length<2){for(var r=qt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Yt:e?Ht:Wt)(n,e))},text:function(t){return arguments.length?this.each(null==t?Dt:("function"==typeof t?Ut:Bt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ft:("function"==typeof t?Kt:Gt)(t)):this.node().innerHTML},raise:function(){return this.each(Jt)},lower:function(){return this.each(Qt)},append:function(t){var e="function"==typeof t?t:ee(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:ee(t),r=null==e?ne:"function"==typeof e?e:nt(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(re)},clone:function(t){return this.select(t?oe:ie)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=se(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?ue:ae,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var u,l=0,c=a.length;l<c;++l)for(r=0,u=a[l];r<s;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(t,e){return this.each(("function"==typeof e?he:ce)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const ye=de;var ve={value:()=>{}};function we(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new ge(r)}function ge(t){this._=t}function _e(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function me(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function be(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=ve,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}ge.prototype=we.prototype={constructor:ge,on:function(t,e){var n,r=this._,i=_e(t+"",r),o=-1,s=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=i[o]).type)r[n]=be(r[n],t.name,e);else if(null==e)for(n in r)r[n]=be(r[n],t.name,null);return this}for(;++o<s;)if((n=(t=i[o]).type)&&(n=me(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new ge(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const xe=we;var ke,Ae,Se=0,Ee=0,Me=0,Ce=0,$e=0,Ne=0,Oe="object"==typeof performance&&performance.now?performance:Date,Te="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ie(){return $e||(Te(Pe),$e=Oe.now()+Ne)}function Pe(){$e=0}function Re(){this._call=this._time=this._next=null}function Le(t,e,n){var r=new Re;return r.restart(t,e,n),r}function je(){$e=(Ce=Oe.now())+Ne,Se=Ee=0;try{!function(){Ie(),++Se;for(var t,e=ke;e;)(t=$e-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Se}()}finally{Se=0,function(){for(var t,e,n=ke,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ke=e);Ae=t,Ve(r)}(),$e=0}}function qe(){var t=Oe.now(),e=t-Ce;e>1e3&&(Ne-=e,Ce=t)}function Ve(t){Se||(Ee&&(Ee=clearTimeout(Ee)),t-$e>24?(t<1/0&&(Ee=setTimeout(je,t-Oe.now()-Ne)),Me&&(Me=clearInterval(Me))):(Me||(Ce=Oe.now(),Me=setInterval(qe,1e3)),Se=1,Te(je)))}function ze(t,e,n){var r=new Re;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Re.prototype=Le.prototype={constructor:Re,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Ie():+n)+(null==e?0:+e),this._next||Ae===this||(Ae?Ae._next=this:ke=this,Ae=this),this._call=t,this._time=n,Ve()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ve())}};var Xe=xe("start","end","cancel","interrupt"),He=[];function We(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(u){var l,c,h,f;if(1!==n.state)return a();for(l in i)if((f=i[l]).name===n.name){if(3===f.state)return ze(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[l]):+l<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[l])}if(ze((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(u))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(h=n.tween.length),l=0,c=-1;l<h;++l)(f=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=f);r.length=c+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(a),n.state=5,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),a())}function a(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Le((function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}),0,n.time)}(t,n,{name:e,index:r,group:i,on:Xe,tween:He,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function Ye(t,e){var n=Be(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function De(t,e){var n=Be(t,e);if(n.state>3)throw new Error("too late; already running");return n}function Be(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ue(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Fe,Ge=180/Math.PI,Ke={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Je(t,e,n,r,i,o){var s,a,u;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),t*r<e*n&&(t=-t,e=-e,u=-u,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Ge,skewX:Math.atan(u)*Ge,scaleX:s,scaleY:a}}function Qe(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],u=[];return o=t(o),s=t(s),function(t,r,i,o,s,a){if(t!==i||r!==o){var u=s.push("translate(",null,e,null,n);a.push({i:u-4,x:Ue(t,i)},{i:u-2,x:Ue(r,o)})}else(i||o)&&s.push("translate("+i+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,u),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Ue(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,s.rotate,a,u),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Ue(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,s.skewX,a,u),function(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Ue(t,n)},{i:a-2,x:Ue(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,u),o=s=null,function(t){for(var e,n=-1,r=u.length;++n<r;)a[(e=u[n]).i]=e.x(t);return a.join("")}}}var Ze=Qe((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Ke:Je(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),tn=Qe((function(t){return null==t?Ke:(Fe||(Fe=document.createElementNS("http://www.w3.org/2000/svg","g")),Fe.setAttribute("transform",t),(t=Fe.transform.baseVal.consolidate())?Je((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ke)}),", ",")",")");function en(t,e){var n,r;return function(){var i=De(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function nn(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=De(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===e){i[u]=a;break}u===l&&i.push(a)}o.tween=i}}function rn(t,e,n){var r=t._id;return t.each((function(){var t=De(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return Be(t,r).value[e]}}function on(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function sn(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function an(){}var un=.7,ln=1/un,cn="\\s*([+-]?\\d+)\\s*",hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",fn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pn=/^#([0-9a-f]{3,8})$/,dn=new RegExp(`^rgb\\(${cn},${cn},${cn}\\)$`),yn=new RegExp(`^rgb\\(${fn},${fn},${fn}\\)$`),vn=new RegExp(`^rgba\\(${cn},${cn},${cn},${hn}\\)$`),wn=new RegExp(`^rgba\\(${fn},${fn},${fn},${hn}\\)$`),gn=new RegExp(`^hsl\\(${hn},${fn},${fn}\\)$`),_n=new RegExp(`^hsla\\(${hn},${fn},${fn},${hn}\\)$`),mn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function bn(){return this.rgb().formatHex()}function xn(){return this.rgb().formatRgb()}function kn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=pn.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?An(e):3===n?new Cn(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Sn(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Sn(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=dn.exec(t))?new Cn(e[1],e[2],e[3],1):(e=yn.exec(t))?new Cn(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=vn.exec(t))?Sn(e[1],e[2],e[3],e[4]):(e=wn.exec(t))?Sn(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=gn.exec(t))?Pn(e[1],e[2]/100,e[3]/100,1):(e=_n.exec(t))?Pn(e[1],e[2]/100,e[3]/100,e[4]):mn.hasOwnProperty(t)?An(mn[t]):"transparent"===t?new Cn(NaN,NaN,NaN,0):null}function An(t){return new Cn(t>>16&255,t>>8&255,255&t,1)}function Sn(t,e,n,r){return r<=0&&(t=e=n=NaN),new Cn(t,e,n,r)}function En(t){return t instanceof an||(t=kn(t)),t?new Cn((t=t.rgb()).r,t.g,t.b,t.opacity):new Cn}function Mn(t,e,n,r){return 1===arguments.length?En(t):new Cn(t,e,n,null==r?1:r)}function Cn(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function $n(){return`#${In(this.r)}${In(this.g)}${In(this.b)}`}function Nn(){const t=On(this.opacity);return`${1===t?"rgb(":"rgba("}${Tn(this.r)}, ${Tn(this.g)}, ${Tn(this.b)}${1===t?")":`, ${t})`}`}function On(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Tn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function In(t){return((t=Tn(t))<16?"0":"")+t.toString(16)}function Pn(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ln(t,e,n,r)}function Rn(t){if(t instanceof Ln)return new Ln(t.h,t.s,t.l,t.opacity);if(t instanceof an||(t=kn(t)),!t)return new Ln;if(t instanceof Ln)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,u=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=u<.5?o+i:2-o-i,s*=60):a=u>0&&u<1?0:s,new Ln(s,a,u,t.opacity)}function Ln(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function jn(t){return(t=(t||0)%360)<0?t+360:t}function qn(t){return Math.max(0,Math.min(1,t||0))}function Vn(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function zn(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}on(an,kn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:bn,formatHex:bn,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Rn(this).formatHsl()},formatRgb:xn,toString:xn}),on(Cn,Mn,sn(an,{brighter(t){return t=null==t?ln:Math.pow(ln,t),new Cn(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?un:Math.pow(un,t),new Cn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Cn(Tn(this.r),Tn(this.g),Tn(this.b),On(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$n,formatHex:$n,formatHex8:function(){return`#${In(this.r)}${In(this.g)}${In(this.b)}${In(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Nn,toString:Nn})),on(Ln,(function(t,e,n,r){return 1===arguments.length?Rn(t):new Ln(t,e,n,null==r?1:r)}),sn(an,{brighter(t){return t=null==t?ln:Math.pow(ln,t),new Ln(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?un:Math.pow(un,t),new Ln(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Cn(Vn(t>=240?t-240:t+120,i,r),Vn(t,i,r),Vn(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ln(jn(this.h),qn(this.s),qn(this.l),On(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=On(this.opacity);return`${1===t?"hsl(":"hsla("}${jn(this.h)}, ${100*qn(this.s)}%, ${100*qn(this.l)}%${1===t?")":`, ${t})`}`}}));const Xn=t=>()=>t;function Hn(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Xn(isNaN(t)?e:t)}const Wn=function t(e){var n=function(t){return 1==(t=+t)?Hn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Xn(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Mn(t)).r,(e=Mn(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=Hn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function Yn(t){return function(e){var n,r,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=Mn(e[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=t(o),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=a(t),r+""}}}Yn((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return zn((n-r/e)*e,s,i,o,a)}})),Yn((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return zn((n-r/e)*e,i,o,s,a)}}));var Dn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Bn=new RegExp(Dn.source,"g");function Un(t,e){var n,r,i,o=Dn.lastIndex=Bn.lastIndex=0,s=-1,a=[],u=[];for(t+="",e+="";(n=Dn.exec(t))&&(r=Bn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,u.push({i:s,x:Ue(n,r)})),o=Bn.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)a[(n=u[r]).i]=n.x(t);return a.join("")})}function Fn(t,e){var n;return("number"==typeof e?Ue:e instanceof kn?Wn:(n=kn(e))?(e=n,Wn):Un)(t,e)}function Gn(t){return function(){this.removeAttribute(t)}}function Kn(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Jn(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function Qn(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function Zn(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttribute(t))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttribute(t)}}function tr(t,e,n){var r,i,o;return function(){var s,a,u=n(this);if(null!=u)return(s=this.getAttributeNS(t.space,t.local))===(a=u+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,u));this.removeAttributeNS(t.space,t.local)}}function er(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function nr(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function rr(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&nr(t,i)),n}return i._value=e,i}function ir(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&er(t,i)),n}return i._value=e,i}function or(t,e){return function(){Ye(this,t).delay=+e.apply(this,arguments)}}function sr(t,e){return e=+e,function(){Ye(this,t).delay=e}}function ar(t,e){return function(){De(this,t).duration=+e.apply(this,arguments)}}function ur(t,e){return e=+e,function(){De(this,t).duration=e}}function lr(t,e){if("function"!=typeof e)throw new Error;return function(){De(this,t).ease=e}}function cr(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Ye:De;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}var hr=ye.prototype.constructor;function fr(t){return function(){this.style.removeProperty(t)}}function pr(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function dr(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&pr(t,o,n)),r}return o._value=e,o}function yr(t){return function(e){this.textContent=t.call(this,e)}}function vr(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&yr(r)),e}return r._value=t,r}var wr=0;function gr(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function _r(){return++wr}var mr=ye.prototype;gr.prototype=function(t){return ye().transition(t)}.prototype={constructor:gr,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=nt(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,u,l=r[s],c=l.length,h=o[s]=new Array(c),f=0;f<c;++f)(a=l[f])&&(u=t.call(a,a.__data__,f,l))&&("__data__"in a&&(u.__data__=a.__data__),h[f]=u,We(h[f],e,n,f,h,Be(a,n)));return new gr(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=ot(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var u,l=r[a],c=l.length,h=0;h<c;++h)if(u=l[h]){for(var f,p=t.call(u,u.__data__,h,l),d=Be(u,n),y=0,v=p.length;y<v;++y)(f=p[y])&&We(f,e,n,y,p,d);o.push(p),s.push(u)}return new gr(o,s,e,n)},selectChild:mr.selectChild,selectChildren:mr.selectChildren,filter:function(t){"function"!=typeof t&&(t=st(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,u=r[i]=[],l=0;l<a;++l)(o=s[l])&&t.call(o,o.__data__,l,s)&&u.push(o);return new gr(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var u,l=e[a],c=n[a],h=l.length,f=s[a]=new Array(h),p=0;p<h;++p)(u=l[p]||c[p])&&(f[p]=u);for(;a<r;++a)s[a]=e[a];return new gr(s,this._parents,this._name,this._id)},selection:function(){return new hr(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=_r(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,l=0;l<u;++l)if(s=a[l]){var c=Be(s,e);We(s,t,n,l,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new gr(r,this._parents,t,n)},call:mr.call,nodes:mr.nodes,node:mr.node,size:mr.size,empty:mr.empty,each:mr.each,on:function(t,e){var n=this._id;return arguments.length<2?Be(this.node(),n).on.on(t):this.each(cr(n,t,e))},attr:function(t,e){var n=xt(t),r="transform"===n?tn:Fn;return this.attrTween(t,"function"==typeof e?(n.local?tr:Zn)(n,r,rn(this,"attr."+t,e)):null==e?(n.local?Kn:Gn)(n):(n.local?Qn:Jn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=xt(t);return this.tween(n,(r.local?rr:ir)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Ze:Fn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=It(this,t),s=(this.style.removeProperty(t),It(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,fr(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=It(this,t),a=n(this),u=a+"";return null==a&&(this.style.removeProperty(t),u=a=It(this,t)),s===u?null:s===r&&u===i?o:(i=u,o=e(r=s,a))}}(t,r,rn(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var u=De(this,t),l=u.on,c=null==u.value[s]?o||(o=fr(e)):void 0;l===n&&i===c||(r=(n=l).copy()).on(a,i=c),u.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=It(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,dr(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(rn(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,vr(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=Be(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?en:nn)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?or:sr)(e,t)):Be(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?ar:ur)(e,t)):Be(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(lr(e,t)):Be(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;De(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},u={value:function(){0==--i&&o()}};n.each((function(){var n=De(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(u)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:mr[Symbol.iterator]};var br={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function xr(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}ye.prototype.interrupt=function(t){return this.each((function(){!function(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}(this,t)}))},ye.prototype.transition=function(t){var e,n;t instanceof gr?(e=t._id,t=t._name):(e=_r(),(n=br).time=Ie(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],u=a.length,l=0;l<u;++l)(s=a[l])&&We(s,t,e,l,a,n||xr(s,e));return new gr(r,this._parents,t,e)};const{abs:kr,max:Ar,min:Sr}=Math;function Er(t){return{type:t}}function Mr(t,e,n){this.k=t,this.x=e,this.y=n}var Cr;["w","e"].map(Er),["n","s"].map(Er),["n","w","e","s","nw","ne","sw","se"].map(Er),Mr.prototype={constructor:Mr,scale:function(t){return 1===t?this:new Mr(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new Mr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new Mr(1,0,0),Mr.prototype,function(t){t.CIRCLE="circle",t.RECTANGLE="rect"}(Cr||(Cr={}));class $r{constructor(){this._visibility=!0}get isVisible(){return this._visibility}setVisible(t){this._visibility=t}show(){this._visibility=!0}hide(){this._visibility=!1}}class Nr extends $r{constructor(e,n,r){super(),this.id=t.newId(Cr.CIRCLE),this.type=Cr.CIRCLE,this.style={strokeWidth:.5,stroke:"#aaa",strokeOpacity:1,fill:"#ddd",fillOpacity:.25},this.attr={cx:e,cy:n,r}}setPosition(t,e,n){this.attr.cx=t,this.attr.cy=e,this.attr.r=n}move(t,e,n){this.attr.cx+=t,this.attr.cy+=e,this.attr.r+=n,this.attr.r<5&&(this.attr.r=5)}}class Or extends $r{constructor(e,n,r,i){super(),this.id=t.newId(Cr.RECTANGLE),this.type=Cr.RECTANGLE,this.style={strokeWidth:1,stroke:"#f00",strokeOpacity:1,fill:"#ddd",fillOpacity:.5},this.attr={x:e,y:n,w:r,h:i}}setPosition(t,e){this.attr.x=t,this.attr.y=e}move(t,e){this.attr.x+=t,this.attr.y+=e}}const Tr="0123456789abcdef",Ir="abcdef";function Pr(){return`#${Tr.charAt(Math.floor(Math.random()*Tr.length))}${Tr.charAt(Math.floor(Math.random()*Tr.length))}${Tr.charAt(Math.floor(Math.random()*Tr.length))}`}function Rr(){const t=Tr.charAt(Math.floor(Math.random()*Tr.length));return`#${t}${t}${t}`}function Lr(){return`#${Ir.charAt(Math.floor(Math.random()*Ir.length))}00`}var jr=window.document.styleSheets[0];jr.insertRule(".shape--invisible { visibility: hidden;}",jr.cssRules.length);const qr=new class{constructor(t){this.subscriptions=new Map,this.created=new Set;const e=document.getElementById(t);this.width=(null==e?void 0:e.clientWidth)?e.clientWidth:0,this.height=(null==e?void 0:e.clientHeight)?e.clientHeight:0,this.svgg=function(t){return"string"==typeof t?new pe([[document.querySelector(t)]],[document.documentElement]):new pe([[t]],fe)}(`#${t}`).append("svg").attr("width",this.width).attr("height",this.height).append("g").attr("transform","translate(.5, .5)")}registerShapes(t,e){this.subscriptions.set(t.id,t.collection$.subscribe((n=>{this.created.has(t.id)?this.updateShapes(t.id,n):this.createShapes(t.id,n,e)})))}unregisterShapes(t){var e;this.removeShapes(t),this.subscriptions.has(t)&&(null===(e=this.subscriptions.get(t))||void 0===e||e.unsubscribe(),this.subscriptions.delete(t)),this.created.delete(t)}createShapes(t,e,n){console.log("#createShapes",{id:t,collection:e}),n.forEach((n=>{switch(n){case Cr.CIRCLE:this.createCircles(t,e.circles);break;case Cr.RECTANGLE:this.createRectangles(t,e.rectangles)}})),this.created.add(t)}updateShapes(t,e){this.updateCircles(t,e.circles),this.updateRectangles(t,e.rectangles),this.created.add(t)}createCircles(t,e){console.log("#createCircles",{id:t,length:e.length});const n=Cr.CIRCLE;this.svgg.selectAll(`${n}.${t}`).data(e).enter().append(n).attr("id",(t=>t.id)).classed(t,!0).style("stroke-width",(t=>t.style.strokeWidth)).style("stroke",(t=>t.style.stroke)).style("stroke-opacity",(t=>t.style.strokeOpacity)).style("fill",(t=>t.style.fill)).style("fill-opacity",(t=>t.style.fillOpacity)).attr("cx",(t=>t.attr.cx)).attr("cy",(t=>t.attr.cy)).attr("r",(t=>t.attr.r)),this.created.add(t)}updateCircles(t,e){const n=Cr.CIRCLE;this.svgg.selectAll(`${n}.${t}`).data(e).classed("shape--invisible",(t=>!t.isVisible)).style("stroke-width",(t=>t.style.strokeWidth)).style("stroke",(t=>t.style.stroke)).style("stroke-opacity",(t=>t.style.strokeOpacity)).style("fill",(t=>t.style.fill)).style("fill-opacity",(t=>t.style.fillOpacity)).attr("cx",(t=>t.attr.cx)).attr("cy",(t=>t.attr.cy)).attr("r",(t=>t.attr.r))}createRectangles(t,e){console.log("#createRectangles",{id:t,length:e.length});const n=Cr.RECTANGLE;this.svgg.selectAll(`${n}.${t}`).data(e).enter().append(n).attr("id",(t=>t.id)).classed(t,!0).style("stroke-width",(t=>t.style.strokeWidth)).style("stroke",(t=>t.style.stroke)).style("stroke-opacity",(t=>t.style.strokeOpacity)).style("fill",(t=>t.style.fill)).style("fill-opacity",(t=>t.style.fillOpacity)).attr("x",(t=>t.attr.x)).attr("y",(t=>t.attr.y)).attr("width",(t=>t.attr.w)).attr("height",(t=>t.attr.h)),this.created.add(t)}updateRectangles(t,e){const n=Cr.RECTANGLE;this.svgg.selectAll(`${n}.${t}`).data(e).classed("shape--invisible",(t=>!t.isVisible)).style("stroke-width",(t=>t.style.strokeWidth)).style("stroke",(t=>t.style.stroke)).style("stroke-opacity",(t=>t.style.strokeOpacity)).style("fill",(t=>t.style.fill)).style("fill-opacity",(t=>t.style.fillOpacity)).attr("x",(t=>t.attr.x)).attr("y",(t=>t.attr.y)).attr("width",(t=>t.attr.w)).attr("height",(t=>t.attr.h))}removeShapes(t){this.svgg.selectAll(`.${t}`).remove()}}("main"),Vr=new W("MyShapes",{circles:[new Nr(250,200,60),new Nr(550,200,40),new Nr(250,400,40),new Nr(550,400,60)],rectangles:[new Or(50,50,300,200),new Or(450,50,300,200),new Or(50,350,300,200),new Or(450,350,300,200)]}),zr=new W("MyShapes2",{circles:[new Nr(100,100,30),new Nr(200,100,20),new Nr(300,100,30),new Nr(400,100,20),new Nr(500,100,30),new Nr(600,100,20),new Nr(700,100,30),new Nr(100,200,20),new Nr(200,200,30),new Nr(300,200,20),new Nr(400,200,30),new Nr(500,200,20),new Nr(600,200,30),new Nr(700,200,20),new Nr(100,300,30),new Nr(200,300,20),new Nr(300,300,30),new Nr(400,300,20),new Nr(500,300,30),new Nr(600,300,20),new Nr(700,300,30),new Nr(100,400,20),new Nr(200,400,30),new Nr(300,400,20),new Nr(400,400,30),new Nr(500,400,20),new Nr(600,400,30),new Nr(700,400,20),new Nr(100,500,30),new Nr(200,500,20),new Nr(300,500,30),new Nr(400,500,20),new Nr(500,500,30),new Nr(600,500,20),new Nr(700,500,30)],rectangles:[]});!function t(){var e,n;qr.registerShapes(Vr,new Set([Cr.CIRCLE,Cr.RECTANGLE])),qr.registerShapes(zr,new Set([Cr.CIRCLE])),(e=100,void 0===e&&(e=0),void 0===n&&(n=G),e<0&&(e=0),J(e,e,n)).pipe(tt(100)).subscribe({next:()=>{Vr.update((t=>{t.circles.forEach((t=>{t.move(Math.round(4*(Math.random()-.5)),Math.round(4*(Math.random()-.5)),Math.round(8*(Math.random()-.5))),t.style.stroke=Pr(),t.style.fill=Pr(),t.setVisible(0==Math.round(.75*Math.random()))})),t.rectangles.forEach((t=>{t.move(Math.round(8*(Math.random()-.5)),Math.round(8*(Math.random()-.5))),t.style.stroke=Lr(),t.style.fill=Lr(),t.setVisible(0==Math.round(.75*Math.random()))}))})),zr.update((t=>{t.circles.forEach((t=>{t.move(Math.round(4*(Math.random()-.5)),Math.round(4*(Math.random()-.5)),Math.round(8*(Math.random()-.5))),t.style.stroke=Rr(),t.style.fill=Rr(),t.setVisible(0==Math.round(.75*Math.random()))}))}))},complete:()=>{console.log("DONE"),Vr.update((t=>{t.circles[0].setPosition(0,0,80),t.circles[0].setVisible(!0),t.circles[1].setPosition(800,0,120),t.circles[1].setVisible(!0),t.circles[2].setPosition(0,600,120),t.circles[2].setVisible(!0),t.circles[3].setPosition(800,600,80),t.circles[3].setVisible(!0),t.rectangles[0].setPosition(50,50),t.rectangles[0].setVisible(!0),t.rectangles[1].setPosition(450,50),t.rectangles[1].setVisible(!0),t.rectangles[2].setPosition(50,350),t.rectangles[2].setVisible(!0),t.rectangles[3].setPosition(450,350),t.rectangles[3].setVisible(!0)})),qr.unregisterShapes(zr.id),J(5e3).subscribe((()=>{qr.unregisterShapes(Vr.id),J(5e3).subscribe((()=>{t()}))}))}})}()})();